{% extends "base.html" %}
{% from "bootstrap/pagination.html" import render_pagination %}
{% block mycontent %}
    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        {% if request.args.get('show',0)!='1' %}
            <li role="presentation" class="active"><a href="#" role="tab">小区居民</a></li>
            <li role="presentation"><a href="{{ url_for('log.index',show=1) }}" role="tab">外来人员</a></li>
        {% else %}
            <li role="presentation"><a href="{{ url_for('log.index',show=0) }}" role="tab">小区居民</a></li>
            <li role="presentation" class="active"><a href="#" role="tab">外来人员</a></li>
        {% endif %}
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
        {% if request.args.get('show',0)!='1' %}
            <table class="table table-striped table-hover">
                <thead class="hidden-xs">
                <tr>
                    <th>姓名</th>
                    <th>证件类型</th>
                    <th>证件号码</th>
                    <th>体温(℃)</th>
                    <th>测量时间</th>
                    <th>测量地点</th>
                    <th>手机号码</th>
                    {%- if current_user.is_authenticated -%}
                        <th>体温情况</th>
                    {%- endif -%}
                </tr>
                </thead>
                <tbody>
                {% for log in logs %}
                    <tr class="animated fadeIn delay-{{ loop.index0 }}">
                        {% if log.isresident == True %}
                            <td><a href="{{ url_for('book.people_detail',people_id=log.resident.id,isresident=log.isresident) }}">{{ log.resident.name }}</a></td>
                            <td class="hidden-xs">{{ log.resident.id_type }}</td>
                            <td class="hidden-xs">{{ log.resident.id_number }}</td>
                            <td class="hidden-xs">{{ log.temperature }}</td>
                            <td class="hidden-xs">{{ log.record_timestamp.strftime('%d %B %Y - %H:%M:%S') }}</td>
                            <td class="hidden-xs">{{ log.gate_number }}</td>
                            <td class="hidden-xs">{{ log.resident.phone_number }}</td>
                            {%- if current_user.is_authenticated -%}
                                <td class="hidden-xs">
                                    {% if log.temperature < 37.3 %}
                                        <button class="btn btn-success btn-block" disabled>正常</button>
                                    {% else %}
                                        <button class="btn btn-danger btn-block" disabled>异常</button>
                                    {% endif %}
                            {%- endif -%}
                            </td>
                        </tr>
                        {% endif %}
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            {% if request.args.get('show',0) =='1' %}
            <table class="table table-striped table-hover">
                <thead class="hidden-xs">
                <tr>
                    <th>姓名</th>
                    <th>证件类型</th>
                    <th>证件号码</th>
                    <th>体温(℃)</th>
                    <th>测量时间</th>
                    <th>测量地点</th>
                    <th>手机号码</th>
                    {%- if current_user.is_authenticated -%}
                        <th>体温情况</th>
                    {%- endif -%}
                </tr>
                </thead>
                <tbody>
                {% for log in logs %}
                    <tr class="animated fadeIn delay-{{ loop.index0 }}">
                        {% if log.isresident == False %}
                            <td><a href="{{ url_for('book.people_detail',people_id=log.visitor.id,isresident=log.isresident) }}"> {{ log.visitor.name }}</a></td>
                            <td class="hidden-xs">{{ log.visitor.id_type }}</td>
                            <td class="hidden-xs">{{ log.visitor.id_number }}</td>
                            <td class="hidden-xs">{{ log.temperature }}</td>
                            <td class="hidden-xs">{{ log.record_timestamp.strftime('%d %B %Y - %H:%M:%S') }}</td>
                            <td class="hidden-xs">{{ log.gate_number }}</td>
                            <td class="hidden-xs">{{ log.visitor.phone_number }}</td>
                            {%- if current_user.is_authenticated -%}
                                <td class="hidden-xs">
                                    {% if log.temperature < 37.3 %}
                                        <button class="btn btn-success btn-block" disabled>正常</button>
                                    {% else %}
                                        <button class="btn btn-danger btn-block" disabled>异常</button>
                                    {% endif %}
                            {%- endif -%}
                            </td>
                    </tr>
                        {% endif %}
                {% endfor %}
                </tbody>
            </table>
            {% endif %}
        {% endif %}
    {% if pagination and pagination.pages > 1 %}
        <div class="container-fluid text-center">
            {{ render_pagination(pagination) }}
        </div>
    {% endif %}
{% endblock %}